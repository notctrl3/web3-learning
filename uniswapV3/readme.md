## UniswapV3
为解决v2资金利用率低的问题，v3引入集中流动性的概念，即用户可以自行选择价格区域来注入流动性，v3资金池从而形成了不同价格区域
的流动性池。只有交易价格在用户增加流动性的价格区域之间，用户才会获得手续费，所以注入流动性会更加倾向市场价格附近，所以市场
价格附近的流动性较其他区域流动性更大从而资金利用率更大。并且，由于流动性集中于某个区域有upper price和lower price的限制，即使
交易额过大，产生滑点过大也不会导致价格变换过大。


在Uniswap V3中，通过指定token0、token1和费率（fee tier），可以唯一确定一个代币对池UniswapV3Pool。当池被初始化时，系统会生成一个初始的tick， 这个tick表示token0初始价格的平方根。 Uniswap V3采用集中流动性的设计，允许流动性提供者选择特定的价格区间来添加流动性。具体步骤如下：

池的初始化 参数：通过指定token0、token1和费率（例如0.05%、0.30%或1%），可以创建一个唯一的UniswapV3Pool 初始tick：池初始化时，会生成一个初始tick，该tick表示token0相对于token1的初始价格的平方根√p。这个初始价格通常由流动性提供者或创建池的人设定。
选择价格区间 集中流动性：与Uniswap V2不同，V3允许LPs选择一个特定的价格区间（即一个tick范围）来集中提供流动性。这个区间由两个tick值定义，分别是区间的下限和上限。 tick间距（tickSpacing）：每个池有一个预设的tick间距（例如10、60、200等），LPs必须选择的tick必须是这个间距的整数倍,例如当tickSpacing=10时LPs可以选择 （0,10),则对应价格区间为（√p, √p * 1.0001^10）。选择更小的tick间距可以提供更精细的价格控制，但会增加管理的复杂性和gas成本
添加流动性 选择区间：LPs选择一个他们认为价格最可能波动的价格区间 提供流动性：在选定的价格区间内，LPs可以添加一定数量的token0和token1。这些流动性将集中在这个区间内，从而在该区间内提供更高效的流动性 通过这种方式，Uniswap V3不仅提高了资本效率，还允许LPs更灵活地管理风险和收益。LPs可以根据市场预期和策略，选择最合适的价格区间来提供流动性，从而在特定的价格范围内获得更高的交易费用收入。
