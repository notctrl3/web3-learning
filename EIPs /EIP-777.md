## [EIP-777](https://eips.ethereum.org/EIPS/eip-777): Token Standard

### Motivation                            
 - ERC-20标准在实际应用中暴露了严重问题：向合约误转导致资产永久丢失；授权模式复杂且危险；交易无法传递信息，导致DeFi交互笨重
 - 重新设计代币转账模型，使其行为更像以太币本身：转账即执行
 - 发送和接收引入了钩子函数，让合约能感知并控制资金流，彻底解决误转问题。同时引入了操作员机制来取代危险的无限授权，并增加数据字段以实现更丰富的交互逻辑
 - 通过一个全局注册表（EIP-1820）和代理合约来确保平滑升级和向后兼容
### Specification
  合约想要收到token必须实现`tokenReceived`,未实现`tokenReceived`的合约收到token会revert
#### Token 合约函数  
  | 函数                                                                 | 作用                                                                                                     |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| `function authorizeOperator(address operator) external`  | 授权第三方为`holder`的`Operator`, 可代表`holder`发送/销毁token                                                                                         |
| `function defaultOperators() external view returns (address[] memory)`  | 返回 token 合约默认操作员列表                                                           |
| `function revokeOperator(address operator) external`   | 移除已授权操作员                      |
| `function isOperatorFor(address operator,address holder) external view returns (bool)`  | 查询某操作员是否有权限操作 holder 的代币                               |
| `function send(address to, uint256 amount, bytes calldata data) external`  | 发送amount token到to                                                                 |
| `function operatorSend(address from,address to,uint256 amount,bytes calldata data,bytes calldata operatorData) external` | `operator`代表`from`发送amount token到to |

#### **`ERC777TokensSender`** And The **`tokensToSend`** Hook
``` solidity
interface ERC777TokensSender {
    function tokensToSend(
        address operator,
        address from,
        address to,
        uint256 amount,
        bytes calldata userData,
        bytes calldata operatorData
    ) external;
}
```
> `tokensTosend`钩子用于通知持有者其账户余额即将减少的任何请求（包括发送和销毁）。任何地址（普通地址或合约地址）若希望在其地址的代币被转出时收到通知，可以通过 ERC-1820 注册表，注册一个实现了下述`ERC777TokensSender`接口的合约地址
#### **`ERC777TokensRecipient`** And The **`tokensReceived`** Hook
``` solidity
interface ERC777TokensRecipient {
    function tokensReceived(
        address operator,
        address from,
        address to,
        uint256 amount,
        bytes calldata data,
        bytes calldata operatorData
    ) external;
}
```
> `tokensReceived`钩子用于通知接收者其账户余额即将增加的任何请求（包括发送和铸造）。任何地址（普通地址或合约地址）若希望在其接收到代币时收到通知，可以通过 ERC-1820 注册表，注册一个实现了下述`ERC777TokensRecipient`接口的合约地址

### Example
[ERC777](https://github.com/0xjac/ERC777/blob/devel/contracts/ERC777Token.sol)
