## [EIP-2771](https://eips.ethereum.org/EIPS/eip-2771): Secure Protocol for Native Meta Transactions

### Motivation                            
 - 在普通 Ethereum 调用里，如果一个外部账户 (EOA) 想调用合约，就必须先有 ETH 来付 gas。对普通用户尤其是新手来说，这降低了 dApp 的可进入性
 - `Meta‑transaction`的思路：用户无需自己持有 ETH，第三方（Relayer / Forwarder）代付手续费，让 dApp 更易使用
 - 定义了“元交易转发”的标准，让合约能识别原始发送者，并建立了中继者信任机制
### Specification
 | 角色                  | 含义                                                           |
| ------------------- | ------------------------------------------------------------ |
| Transaction Signer  | 原始请求者，离线签名交易意图，发送给 `Relayer`            |
| Gas Relay / Relayer | 接收签名请求，把它包装成真正 transaction，上链并付 gas                          |
| Trusted Forwarder   | 链上受信任的转发合约，验证签名并把真实请求者地址附加到 calldata |
| Recipient（接收合约）     | 最终执行逻辑的合约 — 接受 `meta‑transaction`，并把 “真实请求者” 视为交易发起者           |
 - Forwarder 在 calldata 后面附加上 Signer 的地址 (20 bytes)，然后调用 Recipient
 - Recipient 合约必须提供：
 `function isTrustedForwarder(address forwarder) external view returns(bool);`
 若`Forwarder`是受信任的，会提取真正的`Signer`
 - 合约内部获取请求者应通过 _msgSender() 而 不是直接用 msg.sender。否则将无法正确处理 meta‑transaction

### Security Considerations
#### Malicious forwarder
Recipient 必须严格验证 Forwarder 是否可信，不能轻易信任任意合约，否则可能被攻击伪造 Signer
#### Upgradable forwarder
如果 Forwarder 是可升级或被 compromise，则安全性堪忧 — 所以最好是固定 / 不可变的 trusted forwarder。 
#### Compatibility
把 Signer 地址附加到 calldata 的方法，有可能与某些合约 / 库 (例如批量调用 multicall) 产生兼容性问题 / 安全隐患
### Application
[openzeppelin-contracts](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/metatx/ERC2771Context.sol)
